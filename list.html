<!DOCTYPE html>
<html>
<head>
	<link rel="stylesheet" type="text/css" href="styles/styles.css"></style>
	<link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
	<script src="build/react-with-addons.js"></script>
	<script src="build/JSXTransformer.js"></script>
</head>
<body>
	<div id="example"></div>
	<script type="text/jsx">
		window.React = React;
		var ReactCSSTransitionGroup = React.addons.CSSTransitionGroup;

		var FilteredList = React.createClass({
			filterList: function(event){
				var updatedList = this.state.initialItems;
				updatedList = updatedList.filter(function(item){
					return item.desc.toLowerCase().search(
						event.target.value.toLowerCase()) !== -1;
				});
				this.setState({items: updatedList});
			},
			getInitialState: function(){
				return {
					initialItems: [
					{ key:1, desc:"Daddy Pig", url:"daddypig.png" },
					{ key:2, desc:"Mommy Pig", url:"mommypig.png" },
					{ key:3, desc:"Peppa Pig", url:"peppa.png" },
					{ key:4, desc:"George Pig", url:"george.png" },
					{ key:5, desc:"Mr Fox", url:"mrfox.png" },
					{ key:6, desc:"Miss Rabbit", url:"missrabbit.png" }
					],
					items: []
				}
			},
			componentWillMount: function(){
				this.setState({items: this.state.initialItems})
			},
			render: function(){
				return (
					<div className="filter-list">
						<input type="text" placeholder="Search" onChange={this.filterList}/>						
							<List items={this.state.items} key={this.state}/>
					</div>
					);
			}
		});

		var List = React.createClass({
			render: function(){
				return (
					<ul>
						<ReactCSSTransitionGroup transitionName="example">
						{
							this.props.items.map(function(item) {
								var divStyle = { backgroundImage: 'url(images/' + item.url + ')',}

								return <li key={item.key}>
									<div style={divStyle} className="circular"></div>
									<span className="userName">{item.desc}</span>
									<CommandIcon />
									</li>
							})
						}
						</ReactCSSTransitionGroup>
					</ul>
					)  
			}
		});

		var CommandIcon = React.createClass({
			getInitialState: function() {
				return { isDoubleSize: false };
			},
			iconMouseOver: function() {
				console.log('iconMouseOver');
				this.setState({ isDoubleSize: true });
			},
			iconMouseOut: function () {
				console.log('iconMouseOut');
				this.setState({ isDoubleSize: false });
			},
			render: function() {
				console.log('render:'+this.state.isDoubleSize);
				var cx = React.addons.classSet({
					'commandIcon fa fa-envelope-o': true,
					'fa-2x': this.state.isDoubleSize
				});

				return (
					<i className={cx} onMouseOver={this.iconMouseOver} onMouseOut={this.iconMouseOut}></i>
				)
			}
		});

		React.render(<FilteredList/>, document.getElementById('example'));
	</script>
</body>
</html>